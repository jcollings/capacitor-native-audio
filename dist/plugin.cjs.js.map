{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\r\nconst NativeAudio = registerPlugin('NativeAudio', {\r\n    web: () => import('./web').then(m => new m.NativeAudioWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeAudio };\r\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\r\nimport { Filesystem, Directory, Encoding } from '@capacitor/filesystem';\r\nexport class NativeAudioWeb extends WebPlugin {\r\n    constructor() {\r\n        super({\r\n            name: \"NativeAudio\",\r\n            platforms: [\"web\"],\r\n        });\r\n        this.asset_cache = {};\r\n    }\r\n    resume(options) {\r\n        console.log(options);\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    getCurrentTime(options) {\r\n        console.log(options);\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    getDuration(options) {\r\n        console.log(options);\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    configure(options) {\r\n        console.log(options);\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    async preload(options) {\r\n        if (!this.asset_cache.hasOwnProperty(options.assetId)) {\r\n            this.asset_cache[options.assetId] = options.assetPath;\r\n        }\r\n    }\r\n    async play(options) {\r\n        if (!this.asset_cache.hasOwnProperty(options.assetId)) {\r\n            throw new Error(\"Asset has not been preloaded:\" + options.assetId);\r\n        }\r\n        function _convertUint8ArrayToFloat32Array(incomingData) {\r\n            // incoming data is a UInt8Array\r\n            var i, l = incomingData.length;\r\n            var outputData = new Float32Array(incomingData.length);\r\n            for (i = 0; i < l; i++) {\r\n                outputData[i] = (incomingData[i] - 128) / 128.0;\r\n            }\r\n            return outputData;\r\n        }\r\n        function _stringToMultiUint8Array(input) {\r\n            var binary_string = input;\r\n            var len = binary_string.length;\r\n            var bytes = new Uint8Array(len);\r\n            for (var i = 0; i < len; i++) {\r\n                bytes[i] = binary_string.charCodeAt(i);\r\n            }\r\n            return bytes;\r\n        }\r\n        const context = new AudioContext();\r\n        let contents = await Filesystem.readFile({\r\n            path: this.asset_cache[options.assetId].substr(5),\r\n            directory: Directory.Data,\r\n            encoding: Encoding.UTF16,\r\n        });\r\n        const file_data = _stringToMultiUint8Array(contents.data);\r\n        const chunk = _convertUint8ArrayToFloat32Array(file_data);\r\n        const audio_buffer = context.createBuffer(1, chunk.length, context.sampleRate);\r\n        audio_buffer.getChannelData(0).set(chunk);\r\n        const source = context.createBufferSource();\r\n        source.buffer = audio_buffer;\r\n        source.connect(context.destination);\r\n        source.start();\r\n    }\r\n    loop(options) {\r\n        console.log(options);\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    stop(options) {\r\n        console.log(options);\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    unload(options) {\r\n        console.log(options);\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    setVolume(options) {\r\n        console.log(options);\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\nconst NativeAudio = new NativeAudioWeb();\r\nexport { NativeAudio };\r\n//# sourceMappingURL=web.js.map"],"names":["NativeAudio","registerPlugin","WebPlugin","Filesystem","Directory","Encoding"],"mappings":"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"}